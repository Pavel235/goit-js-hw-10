{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict'\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputElement = document.querySelector('#datetime-picker');\nconst StartBtn = document.querySelector('button[type=\"button\"');\nconst spanDays = document.querySelector('span[data-days]');\nconst spanHours = document.querySelector('span[data-hours]');\nconst spanMinutes = document.querySelector('span[data-minutes]');\nconst spanSeconds = document.querySelector('span[data-seconds]');\n\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n     let userSelectedDate = selectedDates[0];\n     if(userSelectedDate <= new Date()) {\n       iziToast.error({\n        title: 'Error',\n        message: 'Please choose date in the future',\n       })\n       StartBtn.disabled = true; \n     } else {\n        StartBtn.disabled = false; \n     } \n    },\n  };\n  \n  flatpickr(inputElement, options); \n\n\n  StartBtn.addEventListener('click', () => {\n    startCountDown();\n    StartBtn.disabled = true; \n    inputElement.disabled = true; \n  });\n\n  function startCountDown() {\n    const countDownInterval = setInterval(() => {\n        let SelectedDate = flatpickr.parseDate(inputElement.value);\n        const now = new Date();\n        const TimeDifference = SelectedDate - now; \n\n        if(TimeDifference <= 0) {\n            clearInterval(countDownInterval);\n            updateTimer(0, 0, 0, 0);\n            iziToast.success({\n                title: 'Countdown finished',\n                message: 'The countdown has finished',\n            })\n        } else {\n            const {days, hours, minutes, seconds} = convertMs(TimeDifference);\n            updateTimer(days, hours, minutes, seconds); \n        }\n    }, 1000)\n  }\n\n  function updateTimer (days, hours, minutes, seconds) {\n    spanDays.textContent = addLeadingZero(days);\n    spanHours.textContent = addLeadingZero(hours);\n    spanMinutes.textContent = addLeadingZero(minutes);\n    spanSeconds.textContent = addLeadingZero(seconds); \n  }\n\n  function convertMs(ms) {\n\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds }; \n  }\n\n  function addLeadingZero(value) {\n    return value.toString().padStart(2, '0'); \n  }\n  \n"],"names":["inputElement","StartBtn","spanDays","spanHours","spanMinutes","spanSeconds","options","selectedDates","iziToast","flatpickr","startCountDown","countDownInterval","SelectedDate","now","TimeDifference","updateTimer","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"2GAOA,MAAMA,EAAe,SAAS,cAAc,kBAAkB,EACxDC,EAAW,SAAS,cAAc,sBAAsB,EACxDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAGzDC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACCA,EAAc,IACd,IAAI,MACzBC,EAAS,MAAM,CACd,MAAO,QACP,QAAS,kCACjB,CAAQ,EACDP,EAAS,SAAW,IAEnBA,EAAS,SAAW,EAEvB,CACL,EAEEQ,EAAUT,EAAcM,CAAO,EAG/BL,EAAS,iBAAiB,QAAS,IAAM,CACvCS,IACAT,EAAS,SAAW,GACpBD,EAAa,SAAW,EAC5B,CAAG,EAED,SAASU,GAAiB,CACxB,MAAMC,EAAoB,YAAY,IAAM,CACxC,IAAIC,EAAeH,EAAU,UAAUT,EAAa,KAAK,EACzD,MAAMa,EAAM,IAAI,KACVC,EAAiBF,EAAeC,EAEtC,GAAGC,GAAkB,EACjB,cAAcH,CAAiB,EAC/BI,EAAY,EAAG,EAAG,EAAG,CAAC,EACtBP,EAAS,QAAQ,CACb,MAAO,qBACP,QAAS,4BACzB,CAAa,MACE,CACH,KAAM,CAAC,KAAAQ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUN,CAAc,EAChEC,EAAYC,EAAMC,EAAOC,EAASC,CAAO,CAC5C,CACJ,EAAE,GAAI,CACR,CAED,SAASJ,EAAaC,EAAMC,EAAOC,EAASC,EAAS,CACnDjB,EAAS,YAAcmB,EAAeL,CAAI,EAC1Cb,EAAU,YAAckB,EAAeJ,CAAK,EAC5Cb,EAAY,YAAciB,EAAeH,CAAO,EAChDb,EAAY,YAAcgB,EAAeF,CAAO,CACjD,CAED,SAASC,EAAUE,EAAI,CASrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASE,EAAeE,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C"}